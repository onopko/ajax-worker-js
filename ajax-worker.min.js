!function(e){var t=e;class n extends Worker{context;constructor(e){if("function"!=typeof e&&"string"!=typeof e)throw new Error("Agument must be 'function' or 'string'.");var t;t="function"==typeof e?(t=e.toString()).replace(/^.+?\{/,"").replace(/}$/,""):e.toString();var n=URL.createObjectURL(new Blob([t]));super(n),this.context=n}terminate(){super.terminate(),URL.revokeObjectURL(this.context)}}function r(){var e,t=function(e){return function(){if(4===this.readyState){if(200!==this.status)throw[this.status,this.statusText,"Error"];e.call(this,this)}}},n=t((function(t){var n=new Blob([t.response]),r=new FileReader;r.onload=function(n){var s=n.target.result,a=s.match(/(data:(.*);)(.*)/);a&&(s=s.replace(a[1],"data:"+t.getResponseHeader("Content-Type")+";")),r=void 0,self.postMessage([s,e])},r.readAsDataURL(n)})),r=t((function(t){self.postMessage([t.response,e])})),s=t((function(t){self.postMessage([t.responseText,e])})),a=t((function(t){self.postMessage([JSON.parse(t.responseText),e])})),o=t((function(t){self.postMessage([t.responseText,e])}));self.onmessage=function(t){var i=t.data,u=new XMLHttpRequest;switch(i.dataType&&i.dataType.toLowerCase()&&(e=i.dataType.toLowerCase()),e){case"json":u.responseType="text",u.onreadystatechange=a;break;case"xml":u.responseType="text",u.onreadystatechange=s;break;case"image":u.responseType="blob","inline"===i.elementType?u.onreadystatechange=n:u.onreadystatechange=r;break;case"datauri":u.responseType="blob",u.onreadystatechange=n;break;default:u.responseType="text",u.onreadystatechange=o}if(u.ontimeout=function(){throw[u.status,u.statusText,"Timeout error ["+i.timeout+"]"]},u.onerror=function(){throw[u.status,u.statusText,"Fetch error"]},i.headers)for(var c in i.headers)u.setRequestHeader(c,i.headers[c]);u.open(i.method,i.url,!0),u.timeout=i.timeout||2e3,u.send(i.data)}}var s=function(){function e(e,t){this.source=e,this.queue=[],this.pool=[],this.running=0,t&&(this.maxThreads=t)}return e.prototype.maxThreads=5,e.prototype.execute=function(){return this.running>=this.maxThreads?this.queue.push(arguments):this._execute.apply(this,arguments)},e.prototype._execute=function(e,t){var r=this;++this.running;var s=this.pool.shift()||new n(this.source),a=t.context||this,o=function(n){if(!t.success)return u();var r;new Promise((function(t){!function(e){var t=e.data[0],n=e.data[1],r=e.elementType,s=e.complete;switch(n){case"xml":t=(new DOMParser).parseFromString(t,"text/xml"),s([t,n]);break;case"image":var a=new Image;if("inline"===r)a.onload=function(){s([a,n])},a.src=t;else{var o=URL.createObjectURL(t);a.onload=function(){URL.revokeObjectURL(o),s([a,n])},a.src=o}break;default:s([t,n])}}({data:n.data,elementType:e.elementType,complete:function(e){r=e,t()}})})).then((function(){return t.success.apply(a,r),u()}))},i=function(e){if(t.error){var n=e.message.split(",");t.error.apply(a,n)}return u()},u=function(e){return t.complete&&t.complete.apply(a,[e]),r.release(s,o,i),r.dequeue()};return s.addEventListener("message",o,!1),s.addEventListener("error",i,!1),s.postMessage(e)},e.prototype.release=function(e,t,n){return e.removeEventListener("message",t,!1),e.removeEventListener("error",n,!1),e.terminate(),--this.running},e.prototype.dequeue=function(){var arguments;if(arguments=this.queue.shift())return this.execute.apply(this,arguments)},e}();t.ajaxWorker=function(e){var t={method:"GET",url:null,dataType:null,elementType:"inline",data:null,timeout:2e3,cache:!0,headers:null},n={success:function(){},error:function(){},complete:function(){}},a={};Object.keys(t).forEach((function(n){a[n]=void 0!==e[n]?e[n]:t[n]}));var o={};Object.keys(n).forEach((function(t){o[t]=e[t]||n[t]})),function(){var e=a.url;URL&&(e=new URL(e,document.baseURI).href);!1===a.cache&&(e=function(e){var t="",n=e.match(/^([^?#]*)(\?[^#]*)?(#.*)?$/);if(n){if(n[1]){t+=n[1];var r=new Date;r=r.getTime(),r=Math.floor(r/1e3),n[2]?t+=n[2]+"&timestamp="+r:t+="?timestamp="+r,n[3]&&(t+=n[3])}}else t=e;return t}(e)),a.url=e}();var i=new s(r);i.execute(a,o),t=n=a=o=i=void 0}}(window);