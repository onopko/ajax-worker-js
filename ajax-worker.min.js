!function(e){var t=e;class n extends Worker{context;constructor(e){if("function"!=typeof e&&"string"!=typeof e)throw new Error("Agument must be 'function' or 'string'.");var t;t="function"==typeof e?(t=e.toString()).replace(/^.+?\{/,"").replace(/\}$/,""):e.toString();var n=URL.createObjectURL(new Blob([t]));super(n),this.context=n}terminate(){super.terminate(),URL.revokeObjectURL(this.context)}}function r(){var e,t,n=0,r=function(t){return function(){if(4===this.readyState)if(200===this.status)t.call(this,this);else{if(!(!0===e.retry&&n<1))throw[this.status,this.statusText,"Error"];n++,c(e)}}},s=r((function(e){var n=new Blob([e.response]),r=new FileReader;r.onload=function(n){var s=n.target.result,a=s.match(/(data:(.*);)(.*)/);a&&(s=s.replace(a[1],`data:${e.getResponseHeader("Content-Type")};`)),r=void 0,self.postMessage([s,t])},r.readAsDataURL(n)})),a=r((function(e){self.postMessage([e.response,t])})),o=r((function(e){self.postMessage([e.responseText,t])})),i=r((function(e){self.postMessage([JSON.parse(e.responseText),t])})),u=r((function(e){self.postMessage([e.responseText,t])})),c=function(e){var n=e,r=new XMLHttpRequest;switch(n.dataType&&n.dataType.toLowerCase()&&(t=n.dataType.toLowerCase()),t){case"json":r.responseType="text",r.onreadystatechange=i;break;case"xml":r.responseType="text",r.onreadystatechange=o;break;case"image":r.responseType="blob","inline"===n.elementType?r.onreadystatechange=s:r.onreadystatechange=a;break;case"datauri":r.responseType="blob",r.onreadystatechange=s;break;default:r.responseType="text",r.onreadystatechange=u}if(r.ontimeout=function(){throw[r.status,r.statusText,`Timeout error [${n.timeout}]`]},r.onerror=function(){throw[r.status,r.statusText,"Fetch error"]},r.open(n.method,n.url,!0),r.timeout=n.timeout||2e3,n.headers)for(var c in n.headers)r.setRequestHeader(c,n.headers[c]);r.send(n.data)};self.onmessage=function(t){e=t.data,c(e)}}var s=function(){function e(e,t){this.source=e,this.queue=[],this.pool=[],this.running=0,t&&(this.maxThreads=t)}return e.prototype.maxThreads=5,e.prototype.execute=function(){return this.running>=this.maxThreads?this.queue.push(arguments):this._execute.apply(this,arguments)},e.prototype._execute=function(e,t){var r=this;++this.running;var s=this.pool.shift()||new n(this.source),a=t.context||this,o=function(n){if(!t.success)return u();var r;new Promise((function(t){!function(e){var t=e.data[0],n=e.data[1],r=e.elementType,s=e.complete;switch(n){case"xml":t=(new DOMParser).parseFromString(t,"text/xml"),s([t,n]);break;case"image":var a=new Image;if("inline"===r)a.onload=function(){s([a,n])},a.src=t;else{var o=URL.createObjectURL(t);a.onload=function(){URL.revokeObjectURL(o),s([a,n])},a.src=o}break;default:s([t,n])}}({data:n.data,elementType:e.elementType,complete:function(e){r=e,t()}})})).then((function(){return t.success.apply(a,r),u()}))},i=function(e){if(t.error){var n=e.message.split(",");t.error.apply(a,n)}return u()},u=function(e){return t.complete&&t.complete.apply(a,[e]),r.release(s,o,i),r.dequeue()};return s.addEventListener("message",o,!1),s.addEventListener("error",i,!1),s.postMessage(e)},e.prototype.release=function(e,t,n){return e.removeEventListener("message",t,!1),e.removeEventListener("error",n,!1),e.terminate(),--this.running},e.prototype.dequeue=function(){var arguments;if(arguments=this.queue.shift())return this.execute.apply(this,arguments)},e}();t.ajaxWorker=function(e){var t={method:"GET",url:null,dataType:null,elementType:"inline",data:null,timeout:2e3,cache:!0,retry:!1,headers:null},n={success:function(){},error:function(){},complete:function(){}},a={};Object.keys(t).forEach((function(n){a[n]=void 0!==e[n]?e[n]:t[n]}));var o={};Object.keys(n).forEach((function(t){o[t]=e[t]||n[t]})),function(){var e=a.url;URL&&(e=new URL(e,document.baseURI).href);!1===a.cache&&(e=function(e){var t="",n=e.match(/^([^?#]*)(\?[^#]*)?(#.*)?$/);if(n){if(n[1]){t+=n[1];var r=new Date;r=r.getTime(),r=Math.floor(r/1e3),n[2]?t+=n[2]+"&timestamp="+r:t+="?timestamp="+r,n[3]&&(t+=n[3])}}else t=e;return t}(e)),a.url=e}();var i=new s(r);i.execute(a,o),t=n=a=o=i=void 0}}(window);