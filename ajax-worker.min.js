!function(e){var t=e;class n extends Worker{constructor(e){if("function"!=typeof e&&"string"!=typeof e)throw new Error("Agument must be 'function' or 'string'.");var t;t="function"==typeof e?(t=e.toString()).replace(/^.+?\{/,"").replace(/\}$/,""):e.toString();var n=URL.createObjectURL(new Blob([t]));super(n),this.context=n}terminate(){super.terminate(),URL.revokeObjectURL(this.context)}}function r(){var e,t,n=0,r=function(t){return function(){if(4===this.readyState)if(200===this.status)t.call(this,this);else{if(!(!0===e.retry&&n<1))throw[this.status,this.statusText,"Error"];n++,c(e)}}},s=r((function(e){var n=new Blob([e.response]),r=new FileReader;r.onload=function(n){var s=n.target.result,a=s.match(/(data:(.*);)(.*)/);a&&(s=s.replace(a[1],`data:${e.getResponseHeader("Content-Type")};`)),r=void 0,self.postMessage([s,t])},r.readAsDataURL(n)})),a=r((function(e){self.postMessage([e.response,t])})),o=r((function(e){self.postMessage([e.responseText,t])})),i=r((function(e){self.postMessage([JSON.parse(e.responseText),t])})),u=r((function(e){self.postMessage([e.responseText,t])})),c=function(t){var r=t,p=r.method.toUpperCase(),f=r.url,l=r.dataType.toLowerCase(),h=function(e){if(e){var t=[];for(var n in e){var r=e[n],s=encodeURIComponent(n)+"="+encodeURIComponent(r);t.push(s)}var a=t.join("&").replace(/%20/g,"+");return t=void 0,a}return""}(r.data),d=new XMLHttpRequest;if("GET"===p&&""!==h){var m=-1!==f.indexOf("?")?"&":"?";f+=m+h}switch(!1===r.cache&&(f=function(e){var t="",n=e.match(/^([^?#]*)(\?[^#]*)?(#.*)?$/);if(n){if(n[1]){t+=n[1];var r=new Date;r=r.getTime(),r=Math.floor(r/1e3),n[2]?t+=n[2]+"&timestamp="+r:t+="?timestamp="+r,n[3]&&(t+=n[3])}}else t=e;return t}(f)),l){case"json":d.responseType="text",d.onreadystatechange=i;break;case"xml":d.responseType="text",d.onreadystatechange=o;break;case"image":d.responseType="blob","inline"===r.elementType?d.onreadystatechange=s:d.onreadystatechange=a;break;case"datauri":d.responseType="blob",d.onreadystatechange=s;break;default:d.responseType="text",d.onreadystatechange=u}if(d.ontimeout=function(){if(!(!0===e.retry&&n<1))throw[d.status,d.statusText,`Timeout error [${r.timeout}]`];n++,c(e)},d.onerror=function(){throw[d.status,d.statusText,"Fetch error"]},d.open(p,f,!0),d.timeout=r.timeout||2e3,r.headers)for(var v in r.headers)d.setRequestHeader(v,r.headers[v]);"POST"===p&&""!==h?d.send(h):d.send()};self.onmessage=function(t){e=t.data,c(e)}}var s=function(){function e(e,t){this.source=e,this.queue=[],this.pool=[],this.running=0,t&&(this.maxThreads=t)}return e.prototype.maxThreads=5,e.prototype.execute=function(){return this.running>=this.maxThreads?this.queue.push(arguments):this._execute.apply(this,arguments)},e.prototype._execute=function(e,t){var r=this;++this.running;var s=this.pool.shift()||new n(this.source),a=t.context||this,o=function(n){if(!t.success)return u();var r;new Promise((function(t){!function(e){var t=e.data[0],n=e.data[1],r=e.elementType,s=e.complete;switch(n){case"xml":t=(new DOMParser).parseFromString(t,"text/xml"),s([t,n]);break;case"image":var a=new Image;if("inline"===r)a.onload=function(){s([a,n])},a.src=t;else{var o=URL.createObjectURL(t);a.onload=function(){URL.revokeObjectURL(o),s([a,n])},a.src=o}break;default:s([t,n])}}({data:n.data,elementType:e.elementType,complete:function(e){r=e,t()}})})).then((function(){return t.success.apply(a,r),u()}))},i=function(e){return t.error&&t.error.apply(a,[null,null,e.message]),u()},u=function(e){return t.complete&&t.complete.apply(a,[e]),r.release(s,o,i),r.dequeue()};return s.addEventListener("message",o,!1),s.addEventListener("error",i,!1),s.postMessage(e)},e.prototype.release=function(e,t,n){return e.removeEventListener("message",t,!1),e.removeEventListener("error",n,!1),e.terminate(),--this.running},e.prototype.dequeue=function(){var arguments;if(arguments=this.queue.shift())return this.execute.apply(this,arguments)},e}();t.ajaxWorker=function(e){var t={method:"GET",url:null,dataType:"text",elementType:"inline",data:null,timeout:2e3,cache:!0,retry:!1,headers:null},n={success:function(){},error:function(){},complete:function(){}},a={};Object.keys(t).forEach((function(n){a[n]=void 0!==e[n]?e[n]:t[n]}));var o={};if(Object.keys(n).forEach((function(t){o[t]=e[t]||n[t]})),URL){var i=new URL(a.url,document.baseURI);a.url=i.href}var u=new s(r);u.execute(a,o),t=n=a=o=u=void 0}}(window);